<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NTU Racing Homework 2023: National Taiwan University Racing Team Software Development Log</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NTU Racing Homework 2023
   &#160;<span id="projectnumber">v0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">National Taiwan University Racing Team Software Development Log </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h5>tags: <code>development_log</code> <code>NTURT</code></h5>
<h4><a class="anchor" id="autotoc_md31"></a>
Group: electrical system group</h4>
<h4><a class="anchor" id="autotoc_md32"></a>
Person in charge: 羅紀翔</h4>
<h4><a class="anchor" id="autotoc_md33"></a>
Authors: 羅紀翔 詹侑昕</h4>
<h4><a class="anchor" id="autotoc_md34"></a>
Subsystem: docker</h4>
<h4><a class="anchor" id="autotoc_md35"></a>
Subsystem number: DO1</h4>
<h4><a class="anchor" id="autotoc_md36"></a>
Software name: docker_virtual_environment</h4>
<h4><a class="anchor" id="autotoc_md37"></a>
Repository: &lt;a href="https://github.com/NTURacingTeam/docker"&gt;github&lt;/a&gt;</h4>
<h4><a class="anchor" id="autotoc_md38"></a>
Started designing date: 2022/7/28</h4>
<h4><a class="anchor" id="autotoc_md39"></a>
Current version: 2.7</h4>
<h1><a class="anchor" id="autotoc_md40"></a>
##### Last modified date: 2022/10/21</h1>
<h1><a class="anchor" id="autotoc_md41"></a>
Engineering goal:</h1>
<p>Virtual environment are commanly used in order to avoid unnecessary environment setups as a result of different computers with different software installed. Here docker is adoped as a comprehensive virtual environment that is applicable for every software.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Program structure:</h1>
<p>In order to simplify the use of docker, the program uses bash script with prompt to ask user what do they want to do, and then execute docker command accrodingly. For more information for how to use, please refer to <code>Usage</code> section in <code>README.md</code>.</p>
<p>The software also provides custom dockerfile in <code>Dockerfile</code> to build custom images that fit our needs. For more information for what is installed, please refer to <code>Image environment</code> section in <code>README.md</code>.</p>
<h1><a class="anchor" id="autotoc_md43"></a>
Included libraries:</h1>
<p><a href="https://github.com/mathworks-ref-arch/matlab-dockerfile">matlab package manager</a></p>
<h1><a class="anchor" id="autotoc_md44"></a>
Testing environment:</h1>
<ul>
<li>bash 5.0.17(1)-release (x86_64-pc-linux-gnu)</li>
<li>docker 20.10.17, build 100c701</li>
</ul>
<h4><a class="anchor" id="autotoc_md45"></a>
Testing hardware:</h4>
<ul>
<li>asus tuf gaming a15 FA506II-0031A 4800H</li>
<li>raspberry pi 3B+</li>
</ul>
<h4><a class="anchor" id="autotoc_md46"></a>
Operating system:</h4>
<ul>
<li>ubuntu 20.04</li>
<li>raspbian 32-bit</li>
</ul>
<h4><a class="anchor" id="autotoc_md47"></a>
Compiler(intepreter) version:</h4>
<ul>
<li>N/A</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md49"></a>
Change date of 2.10:</h1>
<h1><a class="anchor" id="autotoc_md50"></a>
Changes in 2.10:</h1>
<ul>
<li>Install <code>wiringPi</code> using github repository instead of apt in images <code>ros_matlab</code>, <code>ros_host</code>, <code>ros_rpi</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md51"></a>
Change reasons of 2.10:</h1>
<ul>
<li>To prevent wierd problems.</li>
</ul>
<h1><a class="anchor" id="autotoc_md52"></a>
Change date of 2.9: 2022/10/22</h1>
<h1><a class="anchor" id="autotoc_md53"></a>
Changes in 2.9:</h1>
<ul>
<li>Change the base image <code>fun_time_with_arthur</code> into a nvidia/cuda:11.7.0-base-ubuntu22.04</li>
<li>Swap ros1 in <code>fun_time_with_arthur</code> to ros2</li>
<li>Add gpd, gpsd-clients, ros-noetic-gps-common, ros-noetic-gpsd-client and python package gps3 to <code>ros_rpi</code>, <code>ros_host</code>, <code>ros_matlab</code></li>
<li>Add matlab product <code>Control_System_Toolbox</code> to <code>ros_matlab</code></li>
<li>Add matlab product <code>Symbolic_Math_Toolbox</code> to <code>ros_matlab</code></li>
<li>Removed matlab product <code>DSP_System_Toolbox</code>, <code>Signal_Processing_Toolbox</code> from <code>ros_matlab</code></li>
<li>Add <code>ros-humble-gazebo-ros-pkgs</code> to <code>fun_time_with_arthur</code> and <code>ros2_host</code></li>
<li>Add <code>libyaml-cpp-dev</code> to <code>ros_rpi</code></li>
<li>Add <code>ros-humble-ros2-controller</code> to <code>fun_time_with_arthur</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md54"></a>
Change reasons of 2.9:</h1>
<ul>
<li>In order to use ros2 in <code>fun_time_with_arthur</code></li>
<li>In order to use ros2 in <code>fun_time_with_arthur</code></li>
<li>In order to use gps</li>
<li>In order to use transfer fuction</li>
<li>In order to solve differential equations</li>
<li>The product is no longer necessary</li>
<li>In order to use gazebo with ros2</li>
<li>In order to use yaml in cpp</li>
<li>Inn order to use ros2 controllers</li>
</ul>
<h1><a class="anchor" id="autotoc_md55"></a>
Testing result of 2.9:</h1>
<h2><a class="anchor" id="autotoc_md56"></a>
Libraries compatibility</h2>
<p>Most of them work great, some of them need some twicks but overall fine.</p>
<h1><a class="anchor" id="autotoc_md57"></a>
Todos in 2.9:</h1>
<hr  />
<h1><a class="anchor" id="autotoc_md59"></a>
Change date of 2.8: 2022/9/5</h1>
<h1><a class="anchor" id="autotoc_md60"></a>
Changes in 2.8:</h1>
<ul>
<li>Add DSP_System_Toolbox and Signal_Processing_Toolbox to matlab</li>
<li>Add new image <code>ros2_host</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md61"></a>
Change reasons of 2.8:</h1>
<ul>
<li>In order to split a matrix into vectors</li>
<li>In order to test ros2 functionality</li>
</ul>
<h1><a class="anchor" id="autotoc_md62"></a>
Testing result of 2.8:</h1>
<h2><a class="anchor" id="autotoc_md63"></a>
ros2_host</h2>
<p>Built successfully</p>
<h1><a class="anchor" id="autotoc_md64"></a>
Todos in 2.8:</h1>
<hr  />
 <h1><a class="anchor" id="autotoc_md66"></a>
Change date of 2.7: 2022/8/27</h1>
<h1><a class="anchor" id="autotoc_md67"></a>
Changes in 2.7:</h1>
<ul>
<li>Make creating a container from <code>ros_rpi</code> image to have<ul>
<li>A not separated network with the host</li>
<li>Root as the default user</li>
</ul>
</li>
<li>Added wiringpi, python3-serial to <code>ros_rpi</code> image</li>
</ul>
<h1><a class="anchor" id="autotoc_md68"></a>
Change reasons of 2.7:</h1>
<ul>
<li>In order to hve the same functionality as on the host</li>
<li>Packages that will be used for can</li>
</ul>
<h1><a class="anchor" id="autotoc_md69"></a>
Testing result of 2.7:</h1>
<h2><a class="anchor" id="autotoc_md70"></a>
Launch ros on rpi</h2>
<p>All functionality are as aspected as running on the host</p>
<h1><a class="anchor" id="autotoc_md71"></a>
Todos in 2.7:</h1>
<hr  />
<h1><a class="anchor" id="autotoc_md73"></a>
Change date of 2.6: 2022/8/15</h1>
<h1><a class="anchor" id="autotoc_md74"></a>
Changes in 2.6</h1>
<ul>
<li>Add matlab product: Simescape Electrical to ros_matlab</li>
<li>Changed the default user for ros_rpi image sto root</li>
</ul>
<h1><a class="anchor" id="autotoc_md75"></a>
Change reasons of 2.6:</h1>
<ul>
<li>Using Simescape Electrical for motor model</li>
<li>To avoid wierd permission problem when accessing /dev</li>
</ul>
<h1><a class="anchor" id="autotoc_md76"></a>
Testing result of 2.6:</h1>
<h2><a class="anchor" id="autotoc_md77"></a>
Launch ros from host by</h2>
<div class="fragment"><div class="line"> {bash=Changes}</div>
<div class="line">docker -d exec ros bash -c &quot;source /opt/ros/noetic/setup.bash &amp;&amp; source /root/ws/devel/setup.bash &amp;&amp; roslaunch /root/ws/src/nturt_ros.launch&quot;</div>
</div><!-- fragment --><p> ros launched successfully</p>
<h1><a class="anchor" id="autotoc_md78"></a>
Todos in 2.6:</h1>
<hr  />
<h1><a class="anchor" id="autotoc_md80"></a>
Change date of 2.5: 2022/8/12</h1>
<h1><a class="anchor" id="autotoc_md81"></a>
Changes in 2.5:</h1>
<ul>
<li>Minor bug fix<ul>
<li>fix image build and container access to can hat problem on rpi</li>
</ul>
</li>
<li>Add packages need for can to ros_rpi</li>
<li>Add some library for openAI gym and pytorch to fun_time_with_arthur</li>
<li>Add some matlab product to ros_matlab</li>
</ul>
<h1><a class="anchor" id="autotoc_md82"></a>
Change reasons of 2.5:</h1>
<ul>
<li>Some problem when using can hat on docker</li>
</ul>
<h1><a class="anchor" id="autotoc_md83"></a>
Testing result of 2.5:</h1>
<h2><a class="anchor" id="autotoc_md84"></a>
Building &lt;tt&gt;ros_rpi&lt;/tt&gt; on rpi</h2>
<p>Built successfully</p>
<h2><a class="anchor" id="autotoc_md85"></a>
Creating contianer on rpi for can hat usage</h2>
<p>Can hat worked successfully</p>
<h1><a class="anchor" id="autotoc_md86"></a>
Todos in 2.5:</h1>
<hr  />
<h1><a class="anchor" id="autotoc_md88"></a>
Change date of 2.4: 2022/8/5</h1>
<h1><a class="anchor" id="autotoc_md89"></a>
Changes in 2.4:</h1>
<ul>
<li>Minor bug fix<ul>
<li>mkdir the package directory for the container before creating a container</li>
</ul>
</li>
<li>Add <code>Simscape_Driveline</code> package to matlab</li>
</ul>
<h1><a class="anchor" id="autotoc_md90"></a>
Change reasons of 2.4:</h1>
<ul>
<li>if docker bind-mount without the directory alreadly exist, the directory wiil be created under root permission</li>
<li>Using imscape_Driveline for vehicle dynamics</li>
</ul>
<h1><a class="anchor" id="autotoc_md91"></a>
Testing result of 2.4:</h1>
<h2><a class="anchor" id="autotoc_md92"></a>
Creating a continer without the package directory exist</h2>
<p>created successfully without permission problem</p>
<h1><a class="anchor" id="autotoc_md93"></a>
Todos in 2.4:</h1>
<ul>
<li>Not tested on raspberry pi yet</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md95"></a>
Change date of 2.3: 2022/8/4</h1>
<h1><a class="anchor" id="autotoc_md96"></a>
Changes in 2.3:</h1>
<ul>
<li>Minor bug fix<ul>
<li>Using older version of matlab in prevention of glibc version problem</li>
</ul>
</li>
<li>Add <code>Vehicle_Dynamics_Blockset</code> package to matlab</li>
</ul>
<h1><a class="anchor" id="autotoc_md97"></a>
Change reasons of 2.3:</h1>
<ul>
<li>Crash when activating simulink as a result of too old version of glibc of ubuntu20.04</li>
<li>Using Vehicle_Dynamics_Blockset for vehicle dynamics</li>
</ul>
<h1><a class="anchor" id="autotoc_md98"></a>
Testing result of 2.3:</h1>
<h2><a class="anchor" id="autotoc_md99"></a>
Activating simulink</h2>
<p>successfully</p>
<h1><a class="anchor" id="autotoc_md100"></a>
Todos in 2.3:</h1>
<ul>
<li>Not tested on raspberry pi yet</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md102"></a>
Change date of 2.2: 2022/8/4</h1>
<h1><a class="anchor" id="autotoc_md103"></a>
Changes in 2.2:</h1>
<ul>
<li>Minor bug fix<ul>
<li>Give /usr/share/matlab/licenses permission for everone as matlab is installed in root user</li>
</ul>
</li>
<li>Make the script useable for hosts without nvidia docker support</li>
</ul>
<h1><a class="anchor" id="autotoc_md104"></a>
Change reasons of 2.2:</h1>
<ul>
<li>Matlab have to have permission to /usr/share/matlab/licenses in order to activate</li>
<li>The script was original only usable for hosts with nvidia docker support</li>
</ul>
<h1><a class="anchor" id="autotoc_md105"></a>
Testing result of 2.2:</h1>
<h2><a class="anchor" id="autotoc_md106"></a>
ros_matlab</h2>
<p>Permission problem resolved successfully</p>
<h2><a class="anchor" id="autotoc_md107"></a>
Create container with nvidia docker support</h2>
<p>run</p>
<div class="fragment"><div class="line"> {bash=}</div>
<div class="line">./start_container create ros roe_matlab</div>
</div><!-- fragment --><p>with nvidia docker support created successfully</p>
<h2><a class="anchor" id="autotoc_md108"></a>
Create container without nvidia docker support</h2>
<p>run</p>
<div class="fragment"><div class="line"> {bash=}</div>
<div class="line">./start_container create ros roe_matlab</div>
</div><!-- fragment --><p>without nvidia dockChanges in er support created successfully</p>
<h1><a class="anchor" id="autotoc_md109"></a>
Todos in 2.2:</h1>
<ul>
<li>Not tested on raspberry pi yet</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md111"></a>
Change date of 2.1: 2022/8/4</h1>
<h1><a class="anchor" id="autotoc_md112"></a>
Changes in 2.1:</h1>
<ul>
<li>Minor bug fix<ul>
<li>Reverse the order of sourcing ros and ros workspace in .bashrc</li>
</ul>
</li>
<li>Reformat 軟體日誌 to newer version</li>
</ul>
<h1><a class="anchor" id="autotoc_md113"></a>
Change reasons of 2.1:</h1>
<ul>
<li>Sourcing ros workapsce before sourcing ros have no effect</li>
</ul>
<h1><a class="anchor" id="autotoc_md114"></a>
Testing result of 2.1:</h1>
<h2><a class="anchor" id="autotoc_md115"></a>
ros_matlab</h2>
<p>Auto-sourcing ~/ws/devel/setup.bash Successfully</p>
<h2><a class="anchor" id="autotoc_md116"></a>
fun_time_with_arthur</h2>
<p>Auto-sourcing ~/ws/devel/setup.bash Successfully</p>
<h1><a class="anchor" id="autotoc_md117"></a>
Todos in 2.1:</h1>
<ul>
<li>Currently creating a container always uses some specific configuration (always using gpu), will be changed in the next version</li>
<li>Not tested on raspberry pi yet</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md119"></a>
Change date of 2.0: 2022/7/30</h1>
<h1><a class="anchor" id="autotoc_md120"></a>
Changes in 2.0:</h1>
<ul>
<li>Added three other dockerfiles for different needs, including<ul>
<li>ros_host: image with ros for desktop use</li>
<li>ros_matlab: image with ros and matlabfor desktop use</li>
<li>ros_rpi: image with ros for use on raspberry pi</li>
</ul>
</li>
<li>Rewrite dockerfiles to shorten the build stepts</li>
</ul>
<h1><a class="anchor" id="autotoc_md121"></a>
Change reasons of 2.0:</h1>
<ul>
<li>Add other images for different needs, especially ros_matlab for future developments</li>
<li>Rewrite dockerfiles for better performances, please checkout <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/">Better practice for writting dockerfiles</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md122"></a>
Testing result of 2.0:</h1>
<h2><a class="anchor" id="autotoc_md123"></a>
Test building image</h2>
<p>run</p>
<div class="fragment"><div class="line"> {bash=}</div>
<div class="line">./build_image fun_time_with_arthur</div>
<div class="line">./build_image ros_matlab</div>
</div><!-- fragment --><p>Built successfully</p>
<h1><a class="anchor" id="autotoc_md124"></a>
Todos in 2.0:</h1>
<ul>
<li>Currently creating a container always uses some specific configuration</li>
<li>Not tested on raspberry pi yet</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md126"></a>
Testing result of 1.0:</h1>
<h2><a class="anchor" id="autotoc_md127"></a>
Test building image</h2>
<p>run</p>
<div class="fragment"><div class="line"> {bash=}</div>
<div class="line">./build_image fun_time_with_arthur</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md128"></a>
Without an image with same name and tag &lt;tt&gt;latest&lt;/tt&gt;</h3>
<p>Built successfully</p>
<h3><a class="anchor" id="autotoc_md129"></a>
With an image with same name and tag &lt;tt&gt;latest&lt;/tt&gt;</h3>
<p>Built successfully</p>
<h2><a class="anchor" id="autotoc_md130"></a>
Test create/run/shell/stop container</h2>
<p>run</p>
<div class="fragment"><div class="line"> {bash=}</div>
<div class="line">./start_container COMMAND CONTAINER_NAME [IMAGE_NAMME]</div>
</div><!-- fragment --><p>All worked successfully</p>
<h1><a class="anchor" id="autotoc_md131"></a>
Todos in 1.0:</h1>
<ul>
<li>Currently creating a container always uses some specific configuration, which should be change to be configuratable.</li>
<li>The <code>ros_uuv_rpi</code> image should be updated, tested and documented in <code>README.md</code>.</li>
<li>Should add an image with only desktop ros. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
